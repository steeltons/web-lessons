@rootUrl=http://localhost:7777
@realmUrl=http://localhost:8080/realms/jenjetsu-realm
# May be expired
@managerAccessToken=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI3QWE5dks0aUpqcG9FRzZ1dDBtblRsN1J4QnNzMGV4OVNFTjR0LXU3TTZVIn0.eyJleHAiOjE3MDE0NTI3MjgsImlhdCI6MTcwMTQ0MzcyOCwianRpIjoiMzhiZWJhMWYtYzZiYy00MjAwLTk0OWUtNTk2MmUwOWYzYTJkIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9qZW5qZXRzdS1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI3MTMzNDEzMy1lY2Q4LTQxZDYtYTExZS00ZjI0MDNiMzRiY2IiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJqZW5qZXRzdS1zc28iLCJzZXNzaW9uX3N0YXRlIjoiNWMyZjcwMTMtZWZjNy00MzMyLTg5YTYtMjU3ZDhkYmVhODJkIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsIlJPTEVfTU9ERVJBVE9SIiwidW1hX2F1dGhvcml6YXRpb24iLCJkZWZhdWx0LXJvbGVzLWplbmpldHN1LXJlYWxtIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjVjMmY3MDEzLWVmYzctNDMzMi04OWE2LTI1N2Q4ZGJlYTgyZCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJzcHJpbmdfc2VjX3JvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiUk9MRV9NT0RFUkFUT1IiLCJ1bWFfYXV0aG9yaXphdGlvbiIsImRlZmF1bHQtcm9sZXMtamVuamV0c3UtcmVhbG0iXSwicHJlZmVycmVkX3VzZXJuYW1lIjoibWFuYWdlciIsImVtYWlsIjoibWFuYWdlckBtYWlsLmNvbSJ9.kZxMNRsrfGhu3rLVF6TJO_avom4AUTYLmE309KZ6HTUHF_Qx4maPiyW8N6Llx2bGoJtrdGsnNbOxzJOb4lalOqhnHWFBbiTt7YbvFesDgvDja2zbDffJlAaJeFkI-YouH9rTP8aKuRdJaEb1wM35ImZ7FU85knbOEaTn5B6PZQOl04shoqkOvEl9j554cVefgcML0sWH7eSYD3SpymRBuSO9yIbnoQBnFiq_r2C88tRTF0akfDDtkvhvrwzFYI4O0TTZ15e5_n-ou3ebUZhdLRi9DsYr_IkmPNrJD4Xnl5uesQe_MdJL1z0HgidL6C7N6S9YHAgue6vz-dJGY_UH3g
@isisAccessToken=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI3QWE5dks0aUpqcG9FRzZ1dDBtblRsN1J4QnNzMGV4OVNFTjR0LXU3TTZVIn0.eyJleHAiOjE3MDE0NTI4NDksImlhdCI6MTcwMTQ0Mzg0OSwianRpIjoiOGQ3NTg2ODMtYTJmYy00OTA1LTg4YjQtNzJmNDE0MDEzMDRjIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9qZW5qZXRzdS1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI1OGU3NTAwZC04ODhhLTRhMDctYjA0Zi1kZjMzNjEwNTlhNjUiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJqZW5qZXRzdS1zc28iLCJzZXNzaW9uX3N0YXRlIjoiNjkzZWQwMjUtYmU3Yi00MmU5LTk1ZmMtZTE5YzNhZjI1ODYyIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1qZW5qZXRzdS1yZWFsbSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI2OTNlZDAyNS1iZTdiLTQyZTktOTVmYy1lMTljM2FmMjU4NjIiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6Ikh1c3NlaW4gYmVtIExhZGVuIiwic3ByaW5nX3NlY19yb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1qZW5qZXRzdS1yZWFsbSJdLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJpc2lzIiwiZ2l2ZW5fbmFtZSI6Ikh1c3NlaW4iLCJmYW1pbHlfbmFtZSI6ImJlbSBMYWRlbiIsImVtYWlsIjoibnVrZWJvbWJAbWFpbC5jb20ifQ.ptj8cwWVThEidwB1zXUevWU2zvXvZWRA4uZK8twfX599wiVQ86IHxdBSTHy0DBo9tV6Cv5ZZFDHJujRBHp0G7Bjj1a92RrZu2X8u86-QMWU9sam6RDotY2G0iRKCrkuzk3H9mjTa_mo7hy-INOwijFiKmcnaBqOXnQvF2BFNKMwLytY55vmZA80pl4z7cfF-3jZvmjC6DGHuiZHNtnI4fjgJQ-MxqGbMJmkVRsIsNtcn_eWZZa8MlMDFISfaM9PPzoOUFgxEvoZS7cucW-hegUIW9HXxDxlBUQlxdb6LdBz_WCDIjTml-s_d3tIM8_TU02BWgGvPMuTrhMiVtH0hWg
@lakmilakAccessToken=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI3QWE5dks0aUpqcG9FRzZ1dDBtblRsN1J4QnNzMGV4OVNFTjR0LXU3TTZVIn0.eyJleHAiOjE3MDE0NTI5ODYsImlhdCI6MTcwMTQ0Mzk4NiwianRpIjoiYTAyMGI4NjYtYzVmMy00Zjk0LWE2ZTYtMTNmNDRhMjEyYjM1IiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9qZW5qZXRzdS1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiJhOWE3ZjljZS00Mjk4LTRlZTktOTE1OC1kZGUxOTZjMDQ3YjEiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJqZW5qZXRzdS1zc28iLCJzZXNzaW9uX3N0YXRlIjoiMjhiNDljY2YtY2RkOC00M2E4LTk5YzktMzA5NTUzNzJkMmYzIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1qZW5qZXRzdS1yZWFsbSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIyOGI0OWNjZi1jZGQ4LTQzYTgtOTljOS0zMDk1NTM3MmQyZjMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTdGFzIFRzdmV0a292Iiwic3ByaW5nX3NlY19yb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1qZW5qZXRzdS1yZWFsbSJdLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJsYWttaWxhayIsImdpdmVuX25hbWUiOiJTdGFzIiwiZmFtaWx5X25hbWUiOiJUc3ZldGtvdiIsImVtYWlsIjoidHN2ZXRzdGFzMzBAZ21haWwuY29tIn0.ia5yvPE8WdqhbeNq67t91b_qJTuq6aDb2_nSyUkYnRnEILQWg5sifz7TRv6cshDm2RGL9WT6PfgYTW29hdOAz6869GQOLeDAPKhoG33SnVsOhI1_Q0vHLo710zYx5MLOwJBQu7IyB2nF-UjLrEzqecm0DsND82TrYbDgNgqEFohfvBT9KpcbE7FNpvtjWXsr_dZdcbOP5HXym9fdr5dExbZTN3TYd316065AAXi7NrqXaVVQ0CzFnpUKSQk-qqxGOgWMFZjrqG4T5dwrkjRd1rysVil2QSgdkSTJzmLH0TVCPc5RBc3DGa4aYXB-1XqZ9DjE3_YPvF5d9JXa5oqgvA

### Obtaining task creator token (also manager)
POST {{realmUrl}}/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=password&client_id=jenjetsu-sso&client_secret=tb9YimCmd5R1JBVyChxjIEyY6Tv0QEso&redirect_uri=http://localhost:7777/login/oauth2/code/jenjetsu-sso&username=manager&password=1228

### Obtain user (member) token

POST {{realmUrl}}/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=password&client_id=jenjetsu-sso&client_secret=tb9YimCmd5R1JBVyChxjIEyY6Tv0QEso&redirect_uri=http://localhost:7777/login/oauth2/code/jenjetsu-sso&username=isis&password=1228

### Obtain not task member user token
POST {{realmUrl}}/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=password&client_id=jenjetsu-sso&client_secret=tb9YimCmd5R1JBVyChxjIEyY6Tv0QEso&redirect_uri=http://localhost:7777/login/oauth2/code/jenjetsu-sso&username=lakmilak&password=1228

### Get user information

GET {{rootUrl}}/api/v1/users
Authorization: Bearer {{lakmilakAccessToken}}

### Get user tasks

GET {{rootUrl}}/api/v1/users/todo
Authorization: Bearer {{managerAccessToken}}

### Create new dashboard

POST {{rootUrl}}/api/v1/dashboards
Content-Type: application/json
Authorization: Bearer {{managerAccessToken}}

{
    "is_hidden":true
}

### Get dashboard by id

GET {{rootUrl}}/api/v1/dashboards/9d86655e-dff2-45af-acda-66bea421e72a
Authorization: Bearer {{managerAccessToken}}

### Create new user
POST {{rootUrl}}/api/v1/users
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "username" : "stey",
    "email" : "tcvetkov.so@dvfu.ru",
    "firstname" : "Stas",
    "lastname" : "Tsvetkov"
}

### Invite user to dashboard

POST {{rootUrl}}/api/v1/dashboards/invite
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "dashboard_id" : "9d86655e-dff2-45af-acda-66bea421e72a",
    "email" : "nukebomb@mail.com"
}

### Accept invite

PUT {{rootUrl}}/api/v1/dashboards/invite/b79a9936-28c1-449f-93d5-4b60730cd144
Authorization: Bearer {{isisAccessToken}}

### Create task
POST {{rootUrl}}/api/v1/tasks
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "dashboard_id" : "9d86655e-dff2-45af-acda-66bea421e72a",
    "title" : "test-task"
}

### Add user to task

POST {{rootUrl}}/api/v1/tasks/add-user
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "dashboard_id" : "9d86655e-dff2-45af-acda-66bea421e72a",
    "username" : "isis"
}

### Take task by Dashboard member

POST {{rootUrl}}/api/v1/tasks/take
Authorization: Bearer {{isisAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "dashboard_id" : "9d86655e-dff2-45af-acda-66bea421e72a"
}

### Add activity to user
POST {{rootUrl}}/api/v1/activities
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "title" : "test-activity",
    "username" : "isis"
}

### Change task delete status
DELETE  {{rootUrl}}/api/v1/tasks/6480bd03-587c-4cfd-9fcf-272ef86025da
Authorization: Bearer {{managerAccessToken}}

### Restore task
PATCH   {{rootUrl}}/api/v1/tasks/restore/6480bd03-587c-4cfd-9fcf-272ef86025da
Authorization: Bearer {{managerAccessToken}}

### Change Task status by creator
PATCH {{rootUrl}}/api/v1/tasks/status
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "status" : "FINISHED"
}

### Change Task status by member
PATCH {{rootUrl}}/api/v1/tasks/status
Authorization: Bearer {{isisAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "status" : "FINISHED"
}

### Get Task activity
GET {{rootUrl}}/api/v1/activities/624d9e3d-d14c-4bdf-bcb1-8d660cca8a39
Authorization: Bearer {{managerAccessToken}}

### Delete Activity by creator

DELETE {{rootUrl}}/api/v1/activities/624d9e3d-d14c-4bdf-bcb1-8d660cca8a39
Authorization: Bearer {{managerAccessToken}}

### Restore Activity by creator
PATCH {{rootUrl}}/api/v1/activities/restore/624d9e3d-d14c-4bdf-bcb1-8d660cca8a39
Authorization: Bearer {{managerAccessToken}}

### Change Activity status by creator
PATCH {{rootUrl}}/api/v1/activities/status
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "task_activity_id" : "624d9e3d-d14c-4bdf-bcb1-8d660cca8a39",
    "status" : "FINISHED"
}

### Change Activity status by member
PATCH {{rootUrl}}/api/v1/activities/status
Authorization: Bearer {{isisAccessToken}}
Content-Type: application/json

{
    "task_activity_id" : "624d9e3d-d14c-4bdf-bcb1-8d660cca8a39",
    "status" : "FINISHED"
}

### Add lakmilak to dashboard
POST {{rootUrl}}/api/v1/dashboards/invite
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "dashboard_id" : "9d86655e-dff2-45af-acda-66bea421e72a",
    "user_id" : "5dd7557d-e47a-400f-8847-cceb3ff57d9c"
}

### Accept invite as Lakmilak
PUT {{rootUrl}}/api/v1/dashboards/invite/9cd2a5c9-5e41-48f9-91c2-f62f21ef6bf3
Authorization: Bearer {{lakmilakAccessToken}}

### Try to delete task by lakmilak
DELETE {{rootUrl}}/api/v1/tasks/6480bd03-587c-4cfd-9fcf-272ef86025da
Authorization: Bearer {{lakmilakAccessToken}}

### Create comment by manager
POST {{rootUrl}}/api/v1/comments
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "content" : "Maladca"
}

### Create comment by member (isis)
POST {{rootUrl}}/api/v1/comments
Authorization: Bearer {{isisAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "content" : "Ya znay"
}

### Create comment by not member or creator (lakmilak)
POST {{rootUrl}}/api/v1/comments
Authorization: Bearer {{lakmilakAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "content" : "A ya sozdal novii comment"
}

### Get comment by creator
GET {{rootUrl}}/api/v1/comments/1
Authorization: Bearer {{managerAccessToken}}

### Get comment by not member or creator
GET {{rootUrl}}/api/v1/comments/1
Authorization: Bearer {{lakmilakAccessToken}}

### Delete comment by not creator
DELETE {{rootUrl}}/api/v1/comments/2
Authorization: Bearer {{managerAccessToken}}

### Delete comment by creator
DELETE {{rootUrl}}/api/v1/comments/2
Authorization: Bearer {{isisAccessToken}}