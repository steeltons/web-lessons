@rootUrl=http://localhost:7777
@realmUrl=http://localhost:8080/realms/jenjetsu-realm
# May be expired
@managerAccessToken=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI3QWE5dks0aUpqcG9FRzZ1dDBtblRsN1J4QnNzMGV4OVNFTjR0LXU3TTZVIn0.eyJleHAiOjE3MDE3NjUzNzksImlhdCI6MTcwMTc1NjM3OSwianRpIjoiNDM4ZmZhNzItZjMyNC00Y2FmLTllNTMtNmExMTNjZjg0MTI5IiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9qZW5qZXRzdS1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI3MTMzNDEzMy1lY2Q4LTQxZDYtYTExZS00ZjI0MDNiMzRiY2IiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJqZW5qZXRzdS1zc28iLCJzZXNzaW9uX3N0YXRlIjoiZDliYjI4ZDctYmRjMi00MmZkLTkzYzktODlhZmQzMWExNjVlIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsIlJPTEVfTU9ERVJBVE9SIiwidW1hX2F1dGhvcml6YXRpb24iLCJkZWZhdWx0LXJvbGVzLWplbmpldHN1LXJlYWxtIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImQ5YmIyOGQ3LWJkYzItNDJmZC05M2M5LTg5YWZkMzFhMTY1ZSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJzcHJpbmdfc2VjX3JvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwiUk9MRV9NT0RFUkFUT1IiLCJ1bWFfYXV0aG9yaXphdGlvbiIsImRlZmF1bHQtcm9sZXMtamVuamV0c3UtcmVhbG0iXSwicHJlZmVycmVkX3VzZXJuYW1lIjoibWFuYWdlciIsImVtYWlsIjoibWFuYWdlckBtYWlsLmNvbSJ9.j66ZpuNI4tDX3CN5gTkyKAax1P4hy5n8XCoMPqR9qy2n00cpC0JVfMGryUWaQWuprGuWP--1WWrkziCgxXU3LBm2Ad5m5U9VUJaV-2KBqOjO8mJfBpPpAdUeWXUuo7iDUfuCQRxpCO7Ac1bS_gYwqPJcGtgmtM5jJM7oQSQqGYnUez-81GqpYW0VPl3KyNQiZmo5fvLXk46a1sRSqFe7Y6dv6ePkXVKKxOV692cjXrp4GAfKPyY_Ms8E5kyBf501Mc3QPWMzDzWD5nH7Bjdxf09HA_ExhMq_dOg2kEUqMf4Gjbf-_L_6iae6xwM8MLVR1K82rM-rkb7T2cCeyQ_mSQ
@isisAccessToken=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI3QWE5dks0aUpqcG9FRzZ1dDBtblRsN1J4QnNzMGV4OVNFTjR0LXU3TTZVIn0.eyJleHAiOjE3MDE0NTI4NDksImlhdCI6MTcwMTQ0Mzg0OSwianRpIjoiOGQ3NTg2ODMtYTJmYy00OTA1LTg4YjQtNzJmNDE0MDEzMDRjIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9qZW5qZXRzdS1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI1OGU3NTAwZC04ODhhLTRhMDctYjA0Zi1kZjMzNjEwNTlhNjUiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJqZW5qZXRzdS1zc28iLCJzZXNzaW9uX3N0YXRlIjoiNjkzZWQwMjUtYmU3Yi00MmU5LTk1ZmMtZTE5YzNhZjI1ODYyIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1qZW5qZXRzdS1yZWFsbSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI2OTNlZDAyNS1iZTdiLTQyZTktOTVmYy1lMTljM2FmMjU4NjIiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6Ikh1c3NlaW4gYmVtIExhZGVuIiwic3ByaW5nX3NlY19yb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1qZW5qZXRzdS1yZWFsbSJdLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJpc2lzIiwiZ2l2ZW5fbmFtZSI6Ikh1c3NlaW4iLCJmYW1pbHlfbmFtZSI6ImJlbSBMYWRlbiIsImVtYWlsIjoibnVrZWJvbWJAbWFpbC5jb20ifQ.ptj8cwWVThEidwB1zXUevWU2zvXvZWRA4uZK8twfX599wiVQ86IHxdBSTHy0DBo9tV6Cv5ZZFDHJujRBHp0G7Bjj1a92RrZu2X8u86-QMWU9sam6RDotY2G0iRKCrkuzk3H9mjTa_mo7hy-INOwijFiKmcnaBqOXnQvF2BFNKMwLytY55vmZA80pl4z7cfF-3jZvmjC6DGHuiZHNtnI4fjgJQ-MxqGbMJmkVRsIsNtcn_eWZZa8MlMDFISfaM9PPzoOUFgxEvoZS7cucW-hegUIW9HXxDxlBUQlxdb6LdBz_WCDIjTml-s_d3tIM8_TU02BWgGvPMuTrhMiVtH0hWg
@lakmilakAccessToken=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI3QWE5dks0aUpqcG9FRzZ1dDBtblRsN1J4QnNzMGV4OVNFTjR0LXU3TTZVIn0.eyJleHAiOjE3MDE3NjgyOTYsImlhdCI6MTcwMTc1OTI5NiwianRpIjoiZTY3NTMwZTktYzAzOC00N2VkLWExMDYtNTExYTBiZjkwM2ViIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9qZW5qZXRzdS1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI5NDRmOGVlZS1kZDhkLTQ5YTUtYjAxMi01MzlkZWJlMzNiNWIiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJqZW5qZXRzdS1zc28iLCJzZXNzaW9uX3N0YXRlIjoiYTMyNGE4ZTEtZGU1Ni00ZTEzLTllNzAtZjMxZDFjY2JhM2E2IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1qZW5qZXRzdS1yZWFsbSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJhMzI0YThlMS1kZTU2LTRlMTMtOWU3MC1mMzFkMWNjYmEzYTYiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6IlN0YXMgVHN2ZXRrb3YiLCJzcHJpbmdfc2VjX3JvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iLCJkZWZhdWx0LXJvbGVzLWplbmpldHN1LXJlYWxtIl0sInByZWZlcnJlZF91c2VybmFtZSI6Imxha21pbGFrMSIsImdpdmVuX25hbWUiOiJTdGFzIiwiZmFtaWx5X25hbWUiOiJUc3ZldGtvdiIsImVtYWlsIjoidGN2ZXRrb3Yuc29AZHZmdS5ydSJ9.TSene-8KS9eutrQwrq0Kcyp7s-0wxrZqr6Fld9ezJoK-zito2vgsHVEpWeqQyS61GV9uz4AHdiEOHj3GI4bQG0BIqV1JIG-YXpqqYh3wuNs5eai8-7mMvdl8zTWra6cLTwNBne_AEClFU-63BiTGBpO0rc6lwd-A2sTaVT3jobeqHd8OEmvisjhv81HIEodeYXXnIQNQQHxawsywyJ21Ey_Lx0gc1kP7O5jxgcSLsYECdelOZ7A6iKFRnvsRh0iO82bNsyJGj8T4oXf4WbmQUhB44RaLsRMCJiEL1Qr5DYtmsXcLjjbkl_P3dAKbZYdL88mn7zVCRxUQy3ONG5YQxw

### Obtaining task creator token (also manager)
POST {{realmUrl}}/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=password&client_id=jenjetsu-sso&client_secret=tb9YimCmd5R1JBVyChxjIEyY6Tv0QEso&redirect_uri=http://localhost:7777/login/oauth2/code/jenjetsu-sso&username=manager&password=1228

### Obtain user (member) token

POST {{realmUrl}}/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=password&client_id=jenjetsu-sso&client_secret=tb9YimCmd5R1JBVyChxjIEyY6Tv0QEso&redirect_uri=http://localhost:7777/login/oauth2/code/jenjetsu-sso&username=isis&password=1228

### Obtain not task member user token
POST {{realmUrl}}/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=password&client_id=jenjetsu-sso&client_secret=tb9YimCmd5R1JBVyChxjIEyY6Tv0QEso&redirect_uri=http://localhost:7777/login/oauth2/code/jenjetsu-sso&username=CHANGE USERNAME&password=CHANGE PASSWORD

### Get user information

GET {{rootUrl}}/api/v1/users
Authorization: Bearer {{lakmilakAccessToken}}

### Get user tasks

GET {{rootUrl}}/api/v1/users/todo
Authorization: Bearer {{managerAccessToken}}

### Create new dashboard

POST {{rootUrl}}/api/v1/dashboards
Content-Type: application/json
Authorization: Bearer {{managerAccessToken}}

{
    "is_hidden":true
}

### Get dashboard by id

GET {{rootUrl}}/api/v1/dashboards/9d86655e-dff2-45af-acda-66bea421e72a
Authorization: Bearer {{managerAccessToken}}

### Create new user
POST {{rootUrl}}/api/v1/users
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "username" : "stey",
    "email" : "tcvetkov.so@dvfu.ru",
    "firstname" : "Stas",
    "lastname" : "Tsvetkov"
}

### Invite user to dashboard

POST {{rootUrl}}/api/v1/dashboards/invite
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "dashboard_id" : "9d86655e-dff2-45af-acda-66bea421e72a",
    "email" : "tcvetkov.so@dvfu.ru"
}

### Accept invite

PUT {{rootUrl}}/api/v1/dashboards/invite/b79a9936-28c1-449f-93d5-4b60730cd144
Authorization: Bearer {{isisAccessToken}}

### Create task
POST {{rootUrl}}/api/v1/tasks
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "dashboard_id" : "9d86655e-dff2-45af-acda-66bea421e72a",
    "title" : "test-task"
}

### Add user to task

POST {{rootUrl}}/api/v1/tasks/add-user
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "dashboard_id" : "9d86655e-dff2-45af-acda-66bea421e72a",
    "username" : "isis"
}

### Take task by Dashboard member

POST {{rootUrl}}/api/v1/tasks/take
Authorization: Bearer {{isisAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "dashboard_id" : "9d86655e-dff2-45af-acda-66bea421e72a"
}

### Add activity to user
POST {{rootUrl}}/api/v1/activities
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "title" : "test-activity",
    "username" : "isis"
}

### Change task delete status
DELETE  {{rootUrl}}/api/v1/tasks/6480bd03-587c-4cfd-9fcf-272ef86025da
Authorization: Bearer {{managerAccessToken}}

### Restore task
PATCH   {{rootUrl}}/api/v1/tasks/restore/6480bd03-587c-4cfd-9fcf-272ef86025da
Authorization: Bearer {{managerAccessToken}}

### Change Task status by creator
PATCH {{rootUrl}}/api/v1/tasks/status
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "status" : "FINISHED"
}

### Change Task status by member
PATCH {{rootUrl}}/api/v1/tasks/status
Authorization: Bearer {{isisAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "status" : "FINISHED"
}

### Get Task activity
GET {{rootUrl}}/api/v1/activities/624d9e3d-d14c-4bdf-bcb1-8d660cca8a39
Authorization: Bearer {{managerAccessToken}}

### Delete Activity by creator

DELETE {{rootUrl}}/api/v1/activities/624d9e3d-d14c-4bdf-bcb1-8d660cca8a39
Authorization: Bearer {{managerAccessToken}}

### Restore Activity by creator
PATCH {{rootUrl}}/api/v1/activities/restore/624d9e3d-d14c-4bdf-bcb1-8d660cca8a39
Authorization: Bearer {{managerAccessToken}}

### Change Activity status by creator
PATCH {{rootUrl}}/api/v1/activities/status
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "task_activity_id" : "624d9e3d-d14c-4bdf-bcb1-8d660cca8a39",
    "status" : "FINISHED"
}

### Change Activity status by member
PATCH {{rootUrl}}/api/v1/activities/status
Authorization: Bearer {{isisAccessToken}}
Content-Type: application/json

{
    "task_activity_id" : "624d9e3d-d14c-4bdf-bcb1-8d660cca8a39",
    "status" : "FINISHED"
}

### Add lakmilak to dashboard
POST {{rootUrl}}/api/v1/dashboards/invite
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "dashboard_id" : "9d86655e-dff2-45af-acda-66bea421e72a",
    "username" : "lakmilak1"
}

### Accept invite as Lakmilak
PUT {{rootUrl}}/api/v1/dashboards/invite/9cd2a5c9-5e41-48f9-91c2-f62f21ef6bf3
Authorization: Bearer {{lakmilakAccessToken}}

### Try to delete task by lakmilak
DELETE {{rootUrl}}/api/v1/tasks/6480bd03-587c-4cfd-9fcf-272ef86025da
Authorization: Bearer {{lakmilakAccessToken}}

### Create comment by manager
POST {{rootUrl}}/api/v1/comments
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "content" : "Maladca"
}

### Create comment by member (isis)
POST {{rootUrl}}/api/v1/comments
Authorization: Bearer {{isisAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "content" : "Ya znay"
}

### Create comment by not member or creator (lakmilak)
POST {{rootUrl}}/api/v1/comments
Authorization: Bearer {{lakmilakAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "content" : "A ya sozdal novii comment"
}

### Get comment by creator
GET {{rootUrl}}/api/v1/comments/1
Authorization: Bearer {{managerAccessToken}}

### Get comment by not member or creator
GET {{rootUrl}}/api/v1/comments/1
Authorization: Bearer {{lakmilakAccessToken}}

### Delete comment by not creator
DELETE {{rootUrl}}/api/v1/comments/2
Authorization: Bearer {{managerAccessToken}}

### Delete comment by creator
DELETE {{rootUrl}}/api/v1/comments/2
Authorization: Bearer {{isisAccessToken}}

###
PUT http://localhost:7777/api/v1/dashboards/invite/195d7c03-b8e3-459c-ac0a-b4af7aed1bd5
Authorization: Bearer {{lakmilakAccessToken}}

### Add user to task

POST {{rootUrl}}/api/v1/tasks/invite
Authorization: Bearer {{managerAccessToken}}
Content-Type: application/json

{
    "task_id" : "6480bd03-587c-4cfd-9fcf-272ef86025da",
    "dashboard_id" : "9d86655e-dff2-45af-acda-66bea421e72a",
    "username" : "stey"
}

###
PUT {{rootUrl}}/api/v1/tasks/invite/bc14ea72-1875-4f7f-a4e6-1d14ac2d8fd3
Authorization: Bearer {{lakmilakAccessToken}}